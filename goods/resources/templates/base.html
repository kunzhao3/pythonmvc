<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}购物系统{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    {% block styles %}{% endblock %}
</head>
<body>
<header class="site-header">
    <nav class="main-container nav-container">
        <a href="/" class="brand">购物系统</a>

        <button class="mobile-menu-btn" onclick="toggleMenu()">☰</button>

        <ul class="nav-menu" id="mainMenu">
            <li><a href="/" class="nav-link">商品列表</a></li>
            <li><a href="/system/cart/view_cart" class="nav-link">购物车</a></li>
            {% if 'user_id' in session %}
            <li><span class="nav-link">欢迎，{{ session['username'] }}</span></li>
            <li><a href="/content/login/logout" class="nav-link">退出</a></li>
            {% else %}
            <li><a href="/content/login/login" class="nav-link">登录</a></li>
            <li><a href="/content/register/register" class="nav-link">注册</a></li>
            {% endif %}
        </ul>
    </nav>
</header>

<main class="main-container content-wrapper">
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="alert alert-{{ category }}">
        {{ message }}
        <button onclick="this.parentElement.remove()" class="close-btn">&times;</button>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
</main>

<footer class="site-footer">
    <div class="main-container">
        <p>&copy;2025 购物系统.版权所有</p>
    </div>
</footer>

<script src="{{ url_for('static', filename='js/base.js') }}"></script>
{% block scripts %}{% endblock %}
</body>
</html>