{% extends "base.html" %}

{% block title %}è´­ç‰©è½¦{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/cart.css') }}">
{% endblock %}

{% block content %}
<div class="cart-container">
    {% if cart_items %}
    <table class="cart-table">
        <thead>
        <tr>
            <th>å•†å“</th>
            <th>å•ä»·</th>
            <th>æ•°é‡</th>
            <th>å°è®¡</th>
            <th>æ“ä½œ</th>
        </tr>
        </thead>
        <tbody>
        {% for item in cart_items %}
        <tr>
            <td>
                <div class="product-info">
                    <div>
                        <div class="product-name">{{ item.name }}</div>
                        <div class="product-id">å•†å“ç¼–å·: {{ item.pid }}</div>
                    </div>
                </div>
            </td>
            <td>Â¥{{ "%.2f"|format(item.price) }}</td>
            <td>
                <form class="quantity-control"
                      method="POST"
                      action="/system/cart/update_cart?item_id={{ item.cid }}">
                    <label>
                        <input type="number"
                               class="quantity-input"
                               name="quantity"
                               value="{{ item.quantity }}"
                               min="1">
                    </label>
                </form>
            </td>
            <td>Â¥{{ "%.2f"|format(item.price * item.quantity) }}</td>
            <td>
                <a href="/system/cart/remove_from_cart?item_id={{ item.cid }}"
                   class="delete-btn"
                   onclick="return confirmDelete()">åˆ é™¤</a>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

    <div class="order-summary">
        <div class="summary-row">
            <span>å•†å“æ€»è®¡ï¼š</span>
            <span>Â¥{{ "%.2f"|format(total) }}</span>
        </div>
        <div class="summary-row">
            <span>è¿è´¹ï¼š</span>
            <span>Â¥0.00</span>
        </div>
        <div class="summary-row total-row">
            <span>åº”ä»˜æ€»é¢ï¼š</span>
            <span>Â¥{{ "%.2f"|format(total) }}</span>
        </div>
        <a href="/system/cart/checkout" class="continue-shopping">å»ç»“ç®—</a>
    </div>
    {% else %}
    <div class="empty-cart">
        <div class="empty-icon">ğŸ›’</div>
        <h2>æ‚¨çš„è´­ç‰©è½¦æ˜¯ç©ºçš„</h2>
        <p>å¿«å»æŒ‘é€‰å¿ƒä»ªçš„å•†å“å§ï¼</p>
        <br/>
        <a href="/content/products/init" class="continue-shopping">ç«‹å³è´­ç‰©</a>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/cart.js') }}"></script>
{% endblock %}